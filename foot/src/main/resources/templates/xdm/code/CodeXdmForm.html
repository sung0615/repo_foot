<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<div th:replace="~{xdm/include/head :: head}"></div>

<form action="/code/CodeInst" method="post" id="form">
	<input type="hidden" name="cdSeq" th:value="${vo.cdSeq}">
	<!-- ### -->

	<section class="content">
		<div class="container-fluid">

			<div class="block-header">
				<h2>Code</h2>
			</div>

			<!-- Input -->
			<div class="row clearfix">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<div class="card">
						<div class="header">
							<h2>개인정보</h2>
							<ul class="header-dropdown m-r--5">
								<li class="dropdown"><a href="javascript:void(0);"
									class="dropdown-toggle" data-toggle="dropdown" role="button"
									aria-haspopup="true" aria-expanded="false"> <i
										class="material-icons">more_vert</i>
								</a>
									<ul class="dropdown-menu pull-right">
										<li><a href="javascript:void(0);">Action</a></li>
										<li><a href="javascript:void(0);">Another action</a></li>
										<li><a href="javascript:void(0);">Something else here</a></li>
									</ul></li>
							</ul>
						</div>
						<div class="body">
							<h2 class="card-inside-title">
								<small>코드그룹이름<span style="color: red;">*</span></small>
							</h2>
							<div class="row clearfix">
								<div class="col-sm-12">
									<div class="row clearfix">
										<div class="col-sm-3">
											<select class="form-control show-tick" id="codeGroup_cdgSeq" name="codeGroup_cdgSeq"     >
												<option value="">선택하세요</option>
												<option th:each="list : ${list}" th:text="${list.ifcgName}" th:value="${list?.cdgSeq}" ></option>

											</select> <span id="codeGroupError"
												style="color: red; font-size: 10px;"></span>
										</div>

									</div>
								</div>
								<div class="col-sm-3">
									<div class="form-group">
										<div class="form-line">
											<h2 class="card-inside-title">
												<small>코드 번호</small>
											</h2>
											<input type="hidden" name="cdgSeq" th:value="${item?.cdgSeq}" />
											<input class="form-control" type="text" name="cdSeq" disabled
												th:value="${item?.cdSeq}" placeholder="자동생성" />

										</div>
									</div>
								</div>
							</div>

							<div class="row clearfix">
								<div class="col-sm-12">
									<div class="row clearfix">
										<div class="col-sm-3">
											<h2 class="card-inside-title">
												<small>코드그룹 코드<span style="color: red;"></span></small>
											</h2>
											<select class="form-control " disabled>
												<option name="" id="">자동생성</option>

											</select>


										</div>




										<div class="col-sm-3">
											<div class="form-group">
												<div class="form-line">
													<h2 class="card-inside-title">
														<small>코드 이름<span style="color: red;">*</span></small>
													</h2>
													<!-- <input type="text" class="form-control" name="ifcdName" id="ifcdName" placeholder="한글,영대소문자,숫자" th:value="${item?.ifcdName}" />  -->
													<input type="text" id="ifcdName" name="ifcdName" th:value="${item?.ifcdName}" maxlength="20" placeholder="한글,영대소문자,숫자" class="form-control"/>
													<span id="ifcdNameError" style="color: red; font-size: 10px;"></span>
												</div>
											</div>
										</div>

									</div>
									<div class="row clearfix">
										<div class="col-sm-3">
											<h2 class="card-inside-title">
												<small>사용여부</small>
											</h2>
											<select class="form-control show-tick ">
												<option value="">사용</option>

											</select>
										</div>
										<div class="col-sm-3">
											<div class="form-group">
												<div class="form-line">
													<h2 class="card-inside-title">
														<small>순서</small>
													</h2>
													<input type="text" class="form-control" placeholder="" />
												</div>
											</div>
										</div>

									</div>
									<div class="col-sm-12">
										<div class="form-group">
											<div class="form-line">
												<h2 class="card-inside-title">
													<small>설명</small>
												</h2>
												<textarea rows="4" class="form-control no-resize"
													placeholder=""></textarea>
											</div>
										</div>
										<a role="button" class="btn btn-light" style="float: left;"
											th:href="@{/code/codeList}"> <svg
												xmlns="http://www.w3.org/2000/svg" width="16" height="16"
												fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                                                <path
													fill-rule="evenodd"
													d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5" />
                                            </svg>
										</a>
										     &nbsp; &nbsp;
                                        <!-- 업데이트 삭제 -->
                                       <button type="button" class="btn btn-danger" id="btnUelete">
	                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
	                                        <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
	                                        <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
	                                      </svg>
	                                    </button>
										<button type="button" class="btn btn-primary"
											style="float: right;" id="btnSubmit" data-toggle="modal">
											<svg xmlns="http://www.w3.org/2000/svg" width="16"
												height="16" fill="currentColor" class="bi bi-database"
												viewBox="0 0 16 16">
                                                <path
													d="M4.318 2.687C5.234 2.271 6.536 2 8 2s2.766.27 3.682.687C12.644 3.125 13 3.627 13 4c0 .374-.356.875-1.318 1.313C10.766 5.729 9.464 6 8 6s-2.766-.27-3.682-.687C3.356 4.875 3 4.373 3 4c0-.374.356-.875 1.318-1.313M13 5.698V7c0 .374-.356.875-1.318 1.313C10.766 8.729 9.464 9 8 9s-2.766-.27-3.682-.687C3.356 7.875 3 7.373 3 7V5.698c.271.202.58.378.904.525C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777A5 5 0 0 0 13 5.698M14 4c0-1.007-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1s-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4v9c0 1.007.875 1.755 1.904 2.223C4.978 15.71 6.427 16 8 16s3.022-.289 4.096-.777C13.125 14.755 14 14.007 14 13zm-1 4.698V10c0 .374-.356.875-1.318 1.313C10.766 11.729 9.464 12 8 12s-2.766-.27-3.682-.687C3.356 10.875 3 10.373 3 10V8.698c.271.202.58.378.904.525C4.978 9.71 6.427 10 8 10s3.022-.289 4.096-.777A5 5 0 0 0 13 8.698m0 3V13c0 .374-.356.875-1.318 1.313C10.766 14.729 9.464 15 8 15s-2.766-.27-3.682-.687C3.356 13.875 3 13.373 3 13v-1.302c.271.202.58.378.904.525C4.978 12.71 6.427 13 8 13s3.022-.289 4.096-.777c.324-.147.633-.323.904-.525" />
                                              </svg>
										</button>

									</div>
									
									<!-- 삭제 모달 -->
											<div class="modal fade" id="modalConfirm" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
												<div class="modal-dialog modal-dialog-centered">
													<div class="modal-content">
														<div class="modal-header">
															<h5 class="modal-title" id="modalConfirmTitle">title</h5>
															<!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">??</button> -->
														</div>
														<div class="modal-body" id="modalConfirmBody">
															body
														</div>
														<div class="modal-footer">
															<!-- <button type="button" class="btn btn-outline-secondary btn-sm btn_custom" data-bs-dismiss="modal"></button> -->
															<!-- <button type="button" class="btn btn-danger btn-sm btn_custom" name="" id="btnModalDelete">영구삭제</button> -->
															<button type="button" class="btn btn-sm btn_custom" name="" id="" href="#">닫기</button>
															<button type="button" class="btn btn-danger btn-sm btn_custom" name="" id="btnModalUelete">삭제</button>
														</div>
													</div>
												</div>
											</div>
											
										<!-- 삭제모달 AND -->
									
									
									
									
									
								</div>

							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
</form>

<!-- Jquery Core Js -->
<script src="/xdm/template/master/plugins/jquery/jquery.min.js"></script>

<!-- Bootstrap Core Js -->
<script src="/xdm/template/master/plugins/bootstrap/js/bootstrap.js"></script>

<!-- Select Plugin Js -->
<script
	src="/xdm/template/master/plugins/bootstrap-select/js/bootstrap-select.js"></script>

<!-- Slimscroll Plugin Js -->
<script
	src="/xdm/template/master/plugins/jquery-slimscroll/jquery.slimscroll.js"></script>

<!-- Waves Effect Plugin Js -->
<script src="/xdm/template/master./plugins/node-waves/waves.js"></script>

<!-- Autosize Plugin Js -->
<script src="/xdm/template/master/plugins/autosize/autosize.js"></script>

<!-- Moment Plugin Js -->
<script src="/xdm/template/master/plugins/momentjs/moment.js"></script>

<!-- Bootstrap Material Datetime Picker Plugin Js -->
<script
	src="/xdm/template/master/plugins/bootstrap-material-datetimepicker/js/bootstrap-material-datetimepicker.js"></script>

<!-- Bootstrap Datepicker Plugin Js -->
<script
	src="/xdm/template/master/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>

<!-- Custom Js -->
<script src="/xdm/template/master/js/admin.js"></script>
<script src="/xdm/template/master/js/pages/forms/basic-form-elements.js"></script>

<!-- Demo Js -->
<script src="/xdm/template/master/js/demo.js"></script>

<script type="text/javascript">
document.getElementById("btnSubmit").onclick = function() {
    let ifcdName = document.getElementById("ifcdName"); // 코드 이름
    let codeGroup_cdgSeq = document.getElementById("codeGroup_cdgSeq"); // 코드 그룹 Seq
    let codeGroupError = document.getElementById("codeGroupError"); // 코드그룹 Seq 잘못 입력 했을 경우
    let ifcdNameError = document.getElementById("ifcdNameError"); // 코드 이름 잘못 입력 했을 경우
    let isValid = true;

    // 코드 그룹 선택 필드 검증
    if (codeGroup_cdgSeq.value.trim() == "") {
        codeGroupError.innerText = "코드 그룹을 선택하세요!";
        codeGroup_cdgSeq.focus();
        isValid = false;
    } else {
        codeGroupError.innerText = "";
    }

    // 코드 이름 입력 필드 검증 (한글, 영문, 숫자만 허용)
    let regex = /^[a-zA-Z0-9가-힣]+$/;
    if (ifcdName.value.trim() == "") {
        ifcdNameError.innerText = "코드 이름을 입력하세요!";
        ifcdName.focus();
        isValid = false;
    } else if (!regex.test(ifcdName.value.trim())) {
        ifcdNameError.innerText = "한글, 영문, 숫자만 허용됩니다!";
        ifcdName.focus();
        isValid = false;
    } else {
        ifcdNameError.innerText = "";
    }

    // 데이터 값이 있을 경우 폼 제출
    if (isValid) {
        let seq = document.querySelector("input[name=cdSeq]");
        
        /* 등록 */
        function validationInst() {
            if (validationUpdt() == false)
                return false;
        }
        /* 수정 */
        function validationUpdt() {
            let isValid = true;
            if (seq.value == "") {
                isValid = false;
            }
            return isValid;
        }

        if (seq.value == "0" || seq.value == "") {
            if (validationInst() == false)
                return false;

            form.action = "/code/CodeInst";
            form.submit();
        } else {
            if (validationUpdt() == false)
                return false;

            form.action = "/code/CodeUpdt";
            form.submit();
        }
    }
}

</script>

<script type="text/javascript">
// 업데이트 삭제
	if(document.getElementById("btnUelete")){
		document.getElementById("btnUelete").onclick = function () {
			document.querySelector("#modalConfirmTitle").textContent = "확 인";
			document.querySelector("#modalConfirmBody").textContent = "해당 데이터를 삭제하시겠습니까 ?";
			document.querySelector("#btnModalUelete").style.display = '';
			/* document.querySelector("#btnModalDelete").style.display = 'none'; */
			$("#modalConfirm").modal("show");      	
		}
	}
	
	
	document.getElementById("btnModalUelete").onclick = function () {
		form.action = "/code/codeUele";
		form.submit();
	}


</script>



</body>
</html>
